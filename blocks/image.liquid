{% assign bst = block.settings %}

{% if bst.image != blank %}
<style>
    #{{ block.id }} {
        width: var(--image-width);
        aspect-ratio: var(--aspect-ratio);
    }
    #{{ block.id }} img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: var(--border-radius);
    }
</style>

<div class="block-image {% if bst.hidden_on_mobile %}max-md:hidden{% endif %} {% if bst.hidden_on_desktop %}md:hidden{% endif %}" id="{{ block.id }}" style="
    --image-width: {{ bst.image_width }}%;
    --aspect-ratio: {{ bst.image_ratio }};
    --border-radius: {{ bst.border_radius }}px;
    ">
    <a class="block-image__link block h-full w-full" href="{{ bst.image_url }}">
        {% render 'img', image: bst.image, max_width: 800, lazy: true %}    
    </a>
</div>

{% endif %}

{% schema %}
{
  "name": "Image",
  "tag": null,
  "settings": [
    {
      "type": "image_picker",
      "label": "Image",
      "id": "image"
    },
    {
      "type": "url",
      "label": "Image URL",
      "id": "image_url"
    },
    {
      "type": "range",
      "label": "Border radius",
      "id": "border_radius",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 0
    },
    {
      "type": "select",
      "label": "Image ration",
      "id": "image_ratio",
      "options": [
        {
          "value": "16/Ñ‹9",
          "label": "16/9"
        },
        {
          "value": "4/3",
          "label": "4/3"
        },
        {
          "value": "3/4",
          "label": "3/4"
        },
        {
          "value": "1/1",
          "label": "1/1"
        }
      ]
    },
    {
      "type": "range",
      "label": "Image width in percent",
      "id": "image_width",
      "min": 10,
      "max": 100,
      "step": 1,
      "default": 100,
      "info": "If you want to use the full width of the screen, set it to 100"
    },
    {
      "type": "header",
      "content": "Hidden options"
    },
    {
      "type": "checkbox",
      "label": "Hidden on mobile",
      "id": "hidden_on_mobile",
      "default": false
    },
    {
      "type": "checkbox",
      "label": "Hidden on desktop",
      "id": "hidden_on_desktop",
      "default": false
    }
  ],
  "presets": [
    {
      "name": "Image"
    }
  ]
}
{% endschema %}