<div class="checkout__gifts text-center bg-[#e2f0ff] py-[0.8rem] px-[1.2rem] rounded-[1.2rem] mb-[1rem]" style="border: 1px dashed #75bdff;">
    <div class="checkout__gifts-header">
        <h2 class="checkout__gifts-title text-[1.8rem] p-[.35rem] bg-white text-center rounded-[.6rem] font-bold"> {{ block.settings.title }}</h2>
    </div>

    <div class="checkout__gifts-description mt-2 mb-2 font-bold">
        <span x-show="minQty === 1">
            Add a 2nd Pouch, Get a Energy Sampler
        </span>
        <span x-show="minQty === 2">
            Add a 3rd Pouch, Get a Nectar Water Bottle
        </span>
        <span x-show="minQty === 3">
            Add a 4th Pouch, Get a Nectar Frother
        </span>
        <span x-show="minQty === 4">
            Congratulations! All Gifts Unlocked!
        </span>
    </div>
    <div class="checkout__gifts-products grid grid-cols-4 gap-3">
        <template x-for="(product, index) in giftsProducts">
            <div class="checkout__gifts-product" 
                x-data="{ 
                    currentIndex: index+1,
                    message: `Unlocks At ${index + 1} Pouches`
                }"
            >
                <div class="checkout__gifts-product-inner rounded-[.8rem] overflow-hidden">
                    <div class="checkout__gifts-product-price uppercase text-[1.1rem] md:text-xs text-white bg-coolBlack px-[.4rem] py-[.3rem]">
                        free <span class="line-through" x-text="formatMoney(product.price)"></span>
                    </div>

                    <div class="checkout__gifts-product-image h-[6rem] p-[.2rem] relative">
                        <img :src="product.image" :alt="product.title" class="w-full h-full object-contain" width="100" height="100">

                        <div class="checkout__gifts-product-locked" x-show="currentIndex > minQty">
                            <svg width="25" height="33" viewBox="0 0 25 33" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3.11098 32.3333C2.2707 32.3333 1.55162 32.0372 0.953753 31.4451C0.354864 30.8519 0.0554199 30.1391 0.0554199 29.3069V14.1746C0.0554199 13.3423 0.354864 12.6296 0.953753 12.0364C1.55162 11.4442 2.2707 11.1481 3.11098 11.1481H4.63875V8.12168C4.63875 6.02838 5.3838 4.24378 6.87389 2.76788C8.36297 1.29299 10.1642 0.555542 12.2776 0.555542C14.3911 0.555542 16.1928 1.29299 17.6829 2.76788C19.172 4.24378 19.9165 6.02838 19.9165 8.12168V11.1481H21.4443C22.2846 11.1481 23.0042 11.4442 23.6031 12.0364C24.2009 12.6296 24.4999 13.3423 24.4999 14.1746V29.3069C24.4999 30.1391 24.2009 30.8519 23.6031 31.4451C23.0042 32.0372 22.2846 32.3333 21.4443 32.3333H3.11098ZM7.69431 11.1481H16.861V8.12168C16.861 6.86066 16.4154 5.78879 15.5242 4.90607C14.633 4.02336 13.5508 3.582 12.2776 3.582C11.0045 3.582 9.92232 4.02336 9.03111 4.90607C8.13991 5.78879 7.69431 6.86066 7.69431 8.12168V11.1481ZM12.2776 24.7672C13.1179 24.7672 13.8375 24.4711 14.4364 23.8789C15.0343 23.2857 15.3332 22.573 15.3332 21.7407C15.3332 20.9085 15.0343 20.1957 14.4364 19.6025C13.8375 19.0104 13.1179 18.7143 12.2776 18.7143C11.4374 18.7143 10.7183 19.0104 10.1204 19.6025C9.52153 20.1957 9.22209 20.9085 9.22209 21.7407C9.22209 22.573 9.52153 23.2857 10.1204 23.8789C10.7183 24.4711 11.4374 24.7672 12.2776 24.7672Z" fill="currentColor"></path>
                                </svg>
                            <div class="checkout__gifts-product-locked-text">
                                <span x-text="message"></span>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="checkout__gifts-product-name whitespace-nowrap text-center font-medium md:font-normal text-[1.1rem] md:text-xs mt-1">
                    <span x-text="product.title"></span>
                </div>
            </div>
        </template>
    </div>
</div>
{% schema %}
{
    "name": "Gifts",
    "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Unlock Free Gifts!"
        },
        {
          "type": "text",
          "id": "description",
          "label": "Description",
          "default": "Add a 4th Pouch, Get an Electric Nectar Frother"
        },
        {
          "type": "product_list",
          "id": "products",
          "label": "Products",
          "info": "Sort the gift products according to the number of flavors (1,2,3,4)"
        }
    ],
    "presets": [
        {
            "name": "Gifts"
        }
    ]
}
{% endschema %}